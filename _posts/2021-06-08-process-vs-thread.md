---
layout: single
title: "[OS] 프로세스와 스레드 개념 / 멀티 프로세스와 멀티 스레드"
---

프로세스와 스레드는 정말 익숙하게 들은 용어인데 둘 다 비슷한 것 같으면서 분명히 차이가 있는데 명확하게 설명하기 어려운 것 같다.<br>
면접에서도 자주 언급되는 개념이므로 불명확한 개념을 확실하게 정리 해보려 한다.

<br>

# 프로그램

프로세스와 스레드를 본격적으로 비교하기 전에 프로그램이라는 용어에 대해 짚고 넘어가겠다.<br>
프로그램의 사전적 정의를 보면 특정 작업을 수행하는 명령어들의 모음이다. 간단히 말해 개발자가 작성한 코드 파일이다. 이 프로그램이 실행되기 위해서는 파일이 메모리에 적재되어야 하며 이 상태의 프로그램을 프로세스라고 한다.

> 프로그램은 단순 코드 파일. 실행중인 프로그램이 프로세스

<br>

# 프로세스 vs 스레드

## 프로세스란?

앞서 프로세스를 실행중인 프로그램이라고 했다. 프로세스는 작업을 수행하기 위해 운영체제로부터 독립된 메모리 영역을 할당 받는다. 메모리는 다음 4가지 영역으로 나누어져 있다.

- **Code**: 실행 명령을 포함하는 코드
- **Data**: Static 또는 Global 변수
- **Heap**: 동적 메모리
- **Stack**: 지역변수, 매개변수 등 일시적인 데이터

<br>


## 프로세스의 동작
사람들은 하나의 프로세스만 사용하기 보다 동시에 여러 가지를 동시에 하고 싶어 한다. 코드를 작성하면서 동시에 음악이나 동영상을 재생할 수 있다. 하지만 한 프로세스가 실행되기 위해 CPU를 점유하고 있으면 다른 프로세스는 실행될 수 없기 때문에 동시에 여러 프로세스를 실행하기 위해 시분할로 CPU를 점유하게 된다. 이 과정을 컨텍스트 스위칭이라고 한다.<br>
컨텍스트 스위칭이 발생하게 되면 현재 실행중인 프로세스의 상태(Context)를 저장하고 다음 프로세스가 동작하기 위해 이전에 저장했던 상태를 복구해야 한다. 만약 처리해야할 작업이 많다면 컨텍스트 스위칭이 많이 발생하게 되고 그만큼 작업시간에 오버헤드가 발생하게 된다.<br>
그래서 등장한게 스레드이다.

<br>


## 스레드란?

스레드란 프로세스 내에서 동작하는 실행의 단위로 프로세스 내에서 Stack만 할당받고 Code, Data, Heap 영역은 공유하게 된다. 따라서 컨텍스트 스위칭이 발생해도 스레드는 Stack 영역만 처리하면 되기 때문에 프로세스에 비해 전환 속도가 빠르다.

<br>


# 멀티 프로세스 vs 멀티 스레드

멀티 프로세스와 멀티 스레드에 대해 비교하기 전에 한가지 짚고 넘어가자면 멀티 프로세스와 멀티 스레드는 처리방식의 일종으로 여러 개의 프로그램을 동시에 실행시키는게 아닌 한 프로그램에 대한 처리방식으로 이해를 해야한다. 왜냐하면 많은 프로그램들이 하나의 프로세스만으로 실행되는게 아닌 여러 개의 프로세스 혹은 스레드로 실행되기 때문이다.

<br>


## 멀티 프로세스
한 어플리케이션에서 여러 가지 일을 처리할 때가 있다.<br>
예를 들어 여러 사용자가 로그인을 요청한다고 해보자.<br>
한 프로세스는 하나의 로그인만 처리할 수 있기 때문에 동시에 처리할 수가 없다. 그래서 부모 프로세스가 fork를 해서 자식 프로세스를 여러개 생성해 처리한다.
이 때 fork된 자식 프로세스는 부모와 별개로 메모리 영역을 확보한다.

<br>


### **특징**
- 각 프로세스는 독립적인 메모리 공간을 가진다
- 동기화 작업이 필요하지 않다
- 독립적인 메모리를 가지기 때문에 데이터를 주고 받기 위해 별도의 통신 과정이 필요(자원, 메모리 사용 증가)
- 컨텍스트 스위칭 비용이 크다

<br>


### **사용 예시**
크롬 브라우저의 각 탭은 멀티 프로세스 방식으로 처리할 수 있다.<br>
각 탭끼리 데이터를 공유할 필요가 없으며 하나의 탭에 문제가 발생해도 다른 탭에 영향을 끼치지 않는다.

<br>


## 멀티 스레드

스레드는 하나의 프로세스 내에서 동작하는 실행단위라고 했는데 다수의 스레드로 구성하여 작업을 처리하는 것을 멀티 스레드라고 한다. 다수의 스레드가 Stack을 제외한 모든 데이터를 공유하기 때문에 효율적인 처리가 가능하다.

<br>


### **특징**
- 컨텍스트 스위칭 비용이 적다
- 데이터를 공유하기 때문에 스레드간 통신 과정이 불필요
- 데이터 동기화 작업이 필요하다
- 하나의 스레드가 잘못 동작하면 모든 스레드가 중단된다

<br>


### **사용 예시**
VSCode는 멀티 스레드 방식으로 처리할 수 있다.<br>
여러 기능과 메모리를 공유하여 코드를 작성하면서 여러 편집 기능을 사용하기도 하고 코드를 실행할 수도 있다.

<br>


# 정리
- 프로세스는 실행되고 있는 프로그램이다
- 스레드는 한 프로세스 내에서 나뉘어진 실행 단위이다
- 여러 실행 단위들이 동시에 실행하는 것 처럼 보이기 위해 시분할로 CPU를 점유하며 컨텍스트 스위칭이 발생한다
- 한 어플리케이션에 대한 여러 작업을 동시에 처리하는 방식으로 멀티 프로세스와 멀티 스레드가 있다
- 멀티 프로세스는 독립적인 메모리공간, 멀티 스레드는 자원을 공유하여 이에 따른 각각의 장단점이 있다

<br>

# Refferences
- [[OS] 프로세스와 스레드의 차이 - Heee's Development Blog](https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html) 
- [10분 테코톡 🌷 코다의 Process vs Thread](https://www.youtube.com/watch?v=1grtWKqTn50)